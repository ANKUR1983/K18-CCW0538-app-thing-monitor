<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_snc_mbts_monitor.LoadHistoricalData</api_name>
        <client_callable>false</client_callable>
        <description/>
        <name>LoadHistoricalData</name>
        <script><![CDATA[var LoadHistoricalData = Class.create();
LoadHistoricalData.prototype = {
    initialize: function() {
    },

    loadData: function() {
        for(var i =0; i < 7; i++) {
            var request = new sn_ws.RESTMessageV2();
            request.setEndpoint('https://clothosimulator.service-now.com/api/x_snc_mbts/thing_simulator/load_historical_data');
            request.setHttpMethod('POST');
            request.setBasicAuth("clotho", "cl0th0K18");
            var body = {
                "start_offset": i+1,
                "end_offset": i
            };
            request.setRequestBody(JSON.stringify(body));

            var response = request.execute();
            //gs.info("The response code is " + response.getStatusCode());
            //gs.info("The response error message is " + response.getErrorMessage());
		
			
			//gs.info(JSON.stringify(response.getBody()));
            new MetricLoader().loadMetricsFromJSON(response.getBody());
        }
		gs.info("7 days of historical data loaded");
    },
    type: 'LoadHistoricalData'
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-16 17:20:18</sys_created_on>
        <sys_id>1b26600513255300178e7f176144b046</sys_id>
        <sys_mod_count>13</sys_mod_count>
        <sys_name>LoadHistoricalData</sys_name>
        <sys_package display_value="MetricBase Thing Monitor" source="x_snc_mbts_monitor">d329ed9013815700178e7f176144b0aa</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="MetricBase Thing Monitor">d329ed9013815700178e7f176144b0aa</sys_scope>
        <sys_update_name>sys_script_include_1b26600513255300178e7f176144b046</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-30 22:49:14</sys_updated_on>
    </sys_script_include>
</record_update>
